name: Upload a Build Artifact

on:
  push:
    branches: [seolroh]
  pull_request:
    branches: [seolroh]

jobs:
  # job의 이름 설정
  build:
    # 해당 job을 실행하는 운영 체제
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      # node.js 환경설정
      - name: Setup Node.js environment
        uses: actions/setup-node@v3.5.1
        with:
          node-version: '10.15.1'
          node-version-file: '.node-version'
          path: /khu-data-studio-ui-main
      # 패키지 설치 및 빌드
      - name: Install dependencies
        uses: actions/setup-node@v3.5.1
        with:
          path: /khu-data-studio-ui-main
          run: npm install | npm run build
          
        #run: npm install
      # 빌드
        # uses: actions/checkout
        # with:
        #   script: |  
        #     cd khu-data-studio-ui-main
        #     npm run build
          
        # run: npm run build
        # env:
        #   NODE_ENV: production
      # Artifact name
      - name: Temporarily save build artifact
        uses: actions/upload-artifact@v2
        with:
          name: build-artifact
          path: target
          retention-days: 1

  # deploy:
  #   name: Deploy
  #   needs: build
  #   runs-on: ubuntu-latest
  #   steps:
  #     - name: Deploy to Firebase
  #       uses: w9jds/firebase-action@v1.1.0
  #       with:
  #         args: deploy
  #       env:
  #         FIREBASE_TOKEN: ${{ secrets.FIREBASE_TOKEN }}
  #         PROJECT_ID: chez-mout